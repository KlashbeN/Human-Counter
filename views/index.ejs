<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>
            Google Vision Human Counter
        </title>
        <% include head %>
    </head>
    <body class="container">
        <header>
            <% include header %>
        </header>
        <script src="https://www.gstatic.com/firebasejs/3.2.0/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyAmZB2B45FM36JryBmop4qd26I_AVyqf3g",
                authDomain: "vision-recognition-1338.firebaseapp.com",
                databaseURL: "https://vision-recognition-1338.firebaseio.com",
                storageBucket: "vision-recognition-1338.appspot.com"
            };
        </script>

        <main>
            <div class="row">
                <div class="col-sm-8">
                    <div class="jumbotron">
                        <h1>Google project</h1>
                        <p>Vision Recognition</p>

                        <form action="/update/counter" form method="POST">
                            <div class="form-group">
                                Number of service counter:
                                <input type="text" id="numOfCounter" name="numOfCounter"><br>
                            </div>
                            <div class="form-group">
                                <input type="submit" value="Submit"><br>
                            </div>
                        </form>
                        <form action="/upload" form method="POST">
                            <div class="form-image">
                                <input type="file" id="file" name="file" accept="image/jpg, image/png">
                            </div>
                            <div class="form-image">
                                <input type="submit" value="Upload"><br>
                            </div>
                        </form>

                        <ul>
                            <% images.forEach(function(image) { %>
                                <img src='<%= images.url %>'/>
                                <li>
                                    <strong><%=image.name %></strong>
                                    There are
                                    <%= image.numOfPeople %>
                                    people in the image at
                                    <%= image.time %>.</li>
                            <% }); %>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <script>
            (function(i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function() {
                    (i[r].q = i[r].q || []).push(arguments)
                },
                i[r].l = 1 * new Date();
                a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-79208871-1', 'auto');
            ga('send', 'pageview');
        </script>

    </body>
</html>
